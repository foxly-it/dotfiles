<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <title>Seite blockiert</title>

  <!-- FONT AWESOME (Solid only) -->
  <link rel="stylesheet" href="/assets/fontawesome/css/fontawesome.min.css">
  <link rel="stylesheet" href="/assets/fontawesome/css/solid.min.css">

  <style>

    /* ====================================================================== */
    /*  LIGHT MODE (Default)                                                   */
    /* ====================================================================== */
    :root {
      --accent:#39ac31;
      --accent-ink:#fff;

      --fg:#111217;
      --bg:#ffffff;

      --muted:#5f6875;

      --border:#d6d9df;
      --border-soft:#e9ebef;

      --chip-bg:#f4f6f8;
      --chip-border:#e2e5ea;

      --btn-bg:#f4f4f6;
      --btn-border:#d5d8dd;
      --btn-fg:#1c1f24;

      --box-bg:#fafafa;
      --box-border:#cfd3d9;

      --focus:#2463eb33;
      --shadow:0 2px 6px rgba(0,0,0,.08);
    }

    /* ====================================================================== */
    /*  AUTO DARK MODE (System)                                                */
    /* ====================================================================== */
    @media (prefers-color-scheme: dark) {
      :root:not([data-theme]) {
        --accent:#44c03a;
        --accent-ink:#071208;

        --fg:#e8edf3;
        --bg:#0b0e12;

        --muted:#a2adbb;

        --border:#2b3138;
        --border-soft:#323840;

        --chip-bg:#12161c;
        --chip-border:#2a3038;

        --btn-bg:#191d23;
        --btn-border:#2e333b;
        --btn-fg:#e9eef5;

        --box-bg:#11151b;
        --box-border:#2f353f;

        --focus:#60a5fa33;
        --shadow:0 2px 8px rgba(0,0,0,.35);
      }

      :root:not([data-theme]) .four_zero_four_bg {
        background-image:url(/img/blocked-dark.webp);
      }
    }

    /* ====================================================================== */
    /*  FORCED DARK MODE                                                       */
    /* ====================================================================== */
    :root[data-theme="dark"] {
      --accent:#44c03a;
      --accent-ink:#071208;

      --fg:#e8edf3;
      --bg:#0b0e12;

      --muted:#a2adbb;

      --border:#2b3138;
      --border-soft:#323840;

      --chip-bg:#12161c;
      --chip-border:#2a3038;

      --btn-bg:#191d23;
      --btn-border:#2e333b;
      --btn-fg:#e9eef5;

      --box-bg:#11151b;
      --box-border:#2f353f;

      --focus:#60a5fa33;
      --shadow:0 2px 8px rgba(0,0,0,.35);
    }

    /* ====================================================================== */
    /*  BASE                                                                   */
    /* ====================================================================== */
    html, body {
      margin:0;
      padding:0;
      background:var(--bg);
      color:var(--fg);
      font:16px/1.55 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
      transition:background .25s ease,color .25s ease;
    }

    .container {
      max-width:960px;
      margin:0 auto;
      padding:24px;
    }

    .text-center { text-align:center; }

    /* ====================================================================== */
    /*  Illustration                                                          */
    /* ====================================================================== */
    .four_zero_four_bg {
      background-image:url(/img/blocked-light.webp);
      height:320px;
      background-repeat:no-repeat;
      background-position:center;
      background-size:contain;
      margin-bottom:-40px;
      position:relative;
    }

    :root[data-theme="dark"] .four_zero_four_bg {
      background-image:url(/img/blocked-dark.webp);
    }

    .four_zero_four_bg h1 {
      font-size:clamp(32px,8vw,80px);
      margin:0;
      text-shadow:var(--shadow);
    }

    /* ====================================================================== */
    /*  THEME BUTTON                                                          */
    /* ====================================================================== */
    .theme-toggle {
      position:absolute;
      top:16px;
      right:16px;
    }

    #themeBtn {
      width:44px;
      height:44px;
      border-radius:50%;
      border:1px solid var(--btn-border);
      background:var(--btn-bg);
      color:var(--btn-fg);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:19px;
      cursor:pointer;
      transition:0.2s ease;
    }

    #themeBtn:hover {
      background:var(--border-soft);
    }

    /* ====================================================================== */
    /*  BUTTONS                                                               */
    /* ====================================================================== */
    .btn {
      padding:11px 20px;
      border-radius:10px;
      font-weight:600;
      font-size:15px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      border:1px solid var(--btn-border);
      background:var(--btn-bg);
      color:var(--btn-fg);
      text-decoration:none;
      transition:0.18s ease;
    }

    .btn:hover {
      background:var(--border-soft);
    }

    .btn.primary {
      background:var(--accent);
      border-color:#20791c;
      color:var(--accent-ink);
    }

    .btn.primary:hover {
      filter:brightness(.94);
    }

    /* ====================================================================== */
    /*  SECURITY CARD                                                         */
    /* ====================================================================== */
    .security-card {
      background:var(--box-bg);
      border:1px solid var(--box-border);
      border-radius:16px;
      padding:26px 30px;
      margin:26px auto 24px;
      max-width:760px;
      text-align:left;
      box-shadow:var(--shadow);
    }

    .security-title {
      font-size:20px;
      margin:0 0 16px;
      font-weight:600;
    }

    .security-list {
      list-style:none;
      padding:0;
      margin:0;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px 18px;
    }

    @media(max-width:640px){
      .security-list { grid-template-columns:1fr; }
    }

    .security-list li {
      display:flex;
      gap:10px;
      color:var(--muted);
    }

    .security-list svg {
      width:20px;
      height:20px;
      stroke:var(--accent);
      stroke-width:2.3;
      fill:none;
      margin-top:2px;
      flex-shrink:0;
    }

    /* ====================================================================== */
    /*  META BOX                                                              */
    /* ====================================================================== */
    .meta-box {
      margin-top:20px;
      padding:14px 18px;
      border-radius:12px;
      background:var(--chip-bg);
      border:1px solid var(--chip-border);
      display:flex;
      gap:16px;
      justify-content:space-between;
      color:var(--muted);
      font-size:15px;
      flex-wrap:wrap;
    }

    .meta-item strong {
      color:var(--fg);
      font-weight:600;
    }

  </style>
</head>

<body>

<section class="page_404">
  <div class="container">
    <div class="text-center">

      <div class="four_zero_four_bg">
        <h1>Blocked!</h1>

        <div class="theme-toggle">
          <button id="themeBtn" aria-label="Theme umschalten">
            <i class="fa-solid fa-circle-half-stroke"></i>
          </button>
        </div>
      </div>

      <h3>Zugriff verweigert – Diese Website ist gesperrt.</h3>

      <p>Unser Sicherheitssystem hat diese Seite blockiert, weil sie als <b>potenziell gefährlich</b> eingestuft wurde.</p>

      <div class="security-card">
        <h3 class="security-title">Warum wurde diese Website blockiert?</h3>

        <ul class="security-list">
          <li><svg viewBox="0 0 24 24"><path d="M5 12l5 5l9-9"/></svg> Malware oder Schadsoftware</li>
          <li><svg viewBox="0 0 24 24"><path d="M5 12l5 5l9-9"/></svg> Betrugsversuche (SCAM / Phishing)</li>
          <li><svg viewBox="0 0 24 24"><path d="M5 12l5 5l9-9"/></svg> kompromittierte Inhalte</li>
          <li><svg viewBox="0 0 24 24"><path d="M5 12l5 5l9-9"/></svg> gefährliche Weiterleitungen</li>
        </ul>

        <div class="meta-box">
          <div class="meta-item"><strong>Domain:</strong> <span id="m_host">–</span></div>
          <div class="meta-item"><strong>Zeit:</strong> <span id="m_ts">–</span></div>
          <div class="meta-item"><strong>Client-IP:</strong> <span id="m_cip">–</span></div>
        </div>
      </div>

      <div>
        <a class="btn primary" href="/info/"><i class="fa-solid fa-circle-info"></i> Mehr Infos</a>
        <a class="btn" href="https://adguard.homelab.foxly.de"><i class="fa-solid fa-gauge"></i> AdGuard</a>
        <a class="btn" href="#" onclick="location.reload()"><i class="fa-solid fa-rotate-right"></i> Erneut prüfen</a>
      </div>

    </div>
  </div>
</section>

<script>
document.getElementById("m_host").textContent = location.host;
document.getElementById("m_ts").textContent = new Date().toLocaleString();

fetch("/clientip.txt",{cache:"no-store"})
  .then(r=>r.ok?r.text():"n/v")
  .then(ip=>document.getElementById("m_cip").textContent=(ip.trim()||"n/v"))
  .catch(()=>document.getElementById("m_cip").textContent="n/v");

const root = document.documentElement;
const themeBtn = document.getElementById("themeBtn");
const MODES = ["auto","light","dark"];

function applyTheme(mode){
  if(mode==="auto"){
    root.removeAttribute("data-theme");
    themeBtn.innerHTML = '<i class="fa-solid fa-circle-half-stroke"></i>';
  }
  if(mode==="light"){
    root.setAttribute("data-theme","light");
    themeBtn.innerHTML = '<i class="fa-solid fa-sun"></i>';
  }
  if(mode==="dark"){
    root.setAttribute("data-theme","dark");
    themeBtn.innerHTML = '<i class="fa-solid fa-moon"></i>';
  }
  localStorage.setItem("foxly-blockpage-theme",mode);
}

applyTheme(localStorage.getItem("foxly-blockpage-theme") || "auto");

themeBtn.onclick = () => {
  const cur = localStorage.getItem("foxly-blockpage-theme") || "auto";
  applyTheme(MODES[(MODES.indexOf(cur)+1)%MODES.length]);
};
</script>

</body>
</html>
